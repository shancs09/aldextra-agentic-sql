kind: native
name: NLQWXO_SQL
display_name: NLQWXO_SQL
description: This agent interprets natural language user prompts, invokes a SQL generation
  and execution toolchain, and returns both a natural-language summary and a structured
  HTML table representation of the results.
context_access_enabled: true
context_variables: []
llm: watsonx/meta-llama/llama-3-2-90b-vision-instruct
style: default
instructions: "When a user provides a natural language question:\n\n  1. If the input\
  \ is not in English, use `translate-to-english` to translate it to English first.\n\
  \  \n  2. Use `generate_sql_execute` to:\n     - Generate an appropriate SQL query\
  \ based on the English input and the known database schema.\n     - Execute the\
  \ SQL query using a REST API and return the result, which includes:\n        - `message`:\
  \ a short explanation of the data.\n        - `top_rows_html_format`: HTML preview\
  \ of the first 10 rows.\n        - `xls_file`: downloadable spreadsheet of the full\
  \ results.\n  \n3. Generate `sql_result_explanation`:\n   - Parse and analyze the\
  \ content of `result.message`, which may include formatted preview text or HTML\
  \ tags (e.g. ``, ``).\n   - From the parsed content, generate a **brief natural\
  \ language summary** describing what the table contains (e.g., \"List of employees\
  \ with their IDs and names\").\n   - This explanation must be concise and not replicate\
  \ the data itself.\n\n  4. If the input language \u2260 English:\n     - Use `translate-from-english`\
  \ to translate only the `sql_result_explanation` back to the original language.\n\
  \     - Do **not** translate or summarize the entire table content.\n     - If the\
  \ message is empty or non-informative, skip the translation or use a default fallback\
  \ like: \n       `\"Mostrando los primeros resultados a continuaci\xF3n:\"` (for\
  \ Spanish).\n\n  5. Display the final output using the following format (Markdown-compatible):\n\
  \     - Show the translated `result.message` (if available).\n     - Then embed\
  \ `top_rows_html_format` directly.\n     - If HTML is missing, fallback to `top_rows_raw_format`.\n\
  \     - If `status` is \"ERROR\", show a friendly, localized error message.\n\n\
  \  6. Do not show or mention the SQL query unless the user explicitly asks.\n\n\
  \  7. If `xls_file` is present, include a \"Send to Email\" (translated) button\
  \ that triggers the `emailResultAgent`.\n"
guidelines: []
collaborators:
- emailResultAgent
tools:
- generate_sql_execute_result
knowledge_base: []
chat_with_docs:
  enabled: false
  vector_index:
    chunk_size: 400
    chunk_overlap: 50
    limit: 10
  generation:
    prompt_instruction: ''
    generated_response_length: Moderate
    display_text_no_results_found: I searched my knowledge base, but did not find
      anything related to your query
    display_text_connectivity_issue: I might have information related to your query
      to share, but am unable to connect to my knowledge base at the moment
  query_rewrite:
    enabled: true
  confidence_thresholds:
    retrieval_confidence_threshold: Lowest
    response_confidence_threshold: Lowest
  citations:
    citation_title: How do we know?
    citations_shown: -1
  hap_filtering:
    output:
      enabled: false
      threshold: 0.5
starter_prompts:
  is_default_prompts: false
  prompts:
  - id: prompt_id_1
    title: Group Employees
    subtitle: Identify roles of employees in the emergency clinical group
    prompt: Who are the employees assigned to the Aux. Clini. Urg. multigroup and
      what are their roles?
    state: active
  - id: prompt_id_2
    title: Group Hierarchy
    subtitle: Explore all employees in the Anestesia group and its subgroups
    prompt: List all employees, including their roles, who are part of the Anestesia
      multischedule group or any multischedule group that is a descendant (child,
      grandchild, etc.) of Anestesia. Also, include the name of the specific multischedule
      group they belong to within that hierarchy.
    state: active
welcome_content:
  welcome_message: Hi there! I'm your Data Assistant powered by watsonx Orchestrate.
  description: "Ask me anything about your data \u2014 I'll convert your questions\
    \ into SQL, run the query, and show you results as an easy-to-read table."
  is_default_message: false
spec_version: v1
